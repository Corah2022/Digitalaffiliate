<!DOCTYPE html>
<!-- saved from url=(0030)http://127.0.0.1:5500/kyc.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="cPHITrEUqstAzEGM0JqUpUlCbYPGFuwpiUGgBl7P">
    <meta name="keywords" content="Digitalaffiliate">
    <meta name="description" content="Digitalaffiliate">
    <link rel="canonical" href="https://topaffiliatepath.online/account/user/schemas">
    <link rel="shortcut icon" href="https://topaffiliatepath.online/account/assets/global/images/xKNEWY0BHlD3XfywyX7J.png" type="image/x-icon">
    <link rel="icon" href="https://topaffiliatepath.online/account/assets/global/images/xKNEWY0BHlD3XfywyX7J.png" type="image/x-icon">
    <link rel="stylesheet" href="./Digitalaffiliate - KYC_files/fontawesome.min.css">
    <link rel="stylesheet" href="./Digitalaffiliate - KYC_files/bootstrap.min.css">
    <link rel="stylesheet" href="./Digitalaffiliate - KYC_files/animate.css">
    <link rel="stylesheet" href="./Digitalaffiliate - KYC_files/owl.carousel.min.css">
    <link rel="stylesheet" href="./Digitalaffiliate - KYC_files/nice-select.css">
    <link rel="stylesheet" href="./Digitalaffiliate - KYC_files/datatables.min.css">
    <link rel="stylesheet" href="./Digitalaffiliate - KYC_files/simple-notify.min.css">
    <link rel="stylesheet" type="text/css" href="./Digitalaffiliate - KYC_files/notify.css">
    <link rel="stylesheet" href="./Digitalaffiliate - KYC_files/custom.css">
    <link rel="stylesheet" href="./Digitalaffiliate - KYC_files/magnific-popup.css">
    <link rel="stylesheet" href="./Digitalaffiliate - KYC_files/styles.css">
    <link rel="stylesheet" href="./Digitalaffiliate - KYC_files/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer">
    <link href="./Digitalaffiliate - KYC_files/css2" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
    <style>
        .site-head-tag { margin: 0; padding: 0; }
        body { font-family: 'Inter', sans-serif; }
        .site-card, .user-ranking, .user-wallets-mobile, .all-feature-mobile, .single-card, .single-investment-plan, .transaction-des, .transaction-right {
            font-family: 'Inter', sans-serif;
        }
        i[icon-name] { display: inline-block; font-family: 'Font Awesome 6 Free'; font-style: normal; font-weight: 900; }
        i[icon-name="moon"]::before { content: "\f186"; }
        i[icon-name="sun"]::before { content: "\f185"; }
        i[icon-name="bell-ring"]::before { content: "\f0f3"; }
        i[icon-name="user"]::before { content: "\f007"; }
        i[icon-name="setting"]::before { content: "\f013"; }
        i[icon-name="lock"]::before { content: "\f023"; }
        i[icon-name="customer-service"]::before { content: "\f0e6"; }
        i[icon-name="logout"]::before { content: "\f2f5"; }
        i[icon-name="wallet"]::before { content: "\f555"; }
        i[icon-name="landmark"]::before { content: "\f66f"; }
        i[icon-name="file-add"]::before { content: "\f15b"; }
        i[icon-name="export"]::before { content: "\f2f5"; }
        i[icon-name="appstore"]::before { content: "\f009"; }
        i[icon-name="check-square"]::before { content: "\f14a"; }
        i[icon-name="copy"]::before { content: "\f0c5"; }
        i[icon-name="inbox"]::before { content: "\f01c"; }
        i[icon-name="folder-add"]::before { content: "\f07b"; }
        i[icon-name="transaction"]::before { content: "\f0ec"; }
        i[icon-name="cloud"]::before { content: "\f0c2"; }
        i[icon-name="bank"]::before { content: "\f19c"; }
        i[icon-name="credit-card"]::before { content: "\f09d"; }
        i[icon-name="star"]::before { content: "\f005"; }
        i[icon-name="usergroup-add"]::before { content: "\f0c0"; }
        i[icon-name="tool"]::before { content: "\f0ad"; }
        i[icon-name="notification"]::before { content: "\f0f3"; }
        i[icon-name="warning"]::before { content: "\f071"; }
        i[icon-name="info-circle"]::before { content: "\f05a"; }
        i[icon-name="close"]::before { content: "\f00d"; }
        i[icon-name="fingerprint"]::before { content: "\f577"; }
        i[icon-name="backpack"]::before { content: "\f5d2"; }
        i[icon-name="money-collect"]::before { content: "\f0d6"; }
        i[icon-name="gift"]::before { content: "\f06b"; }
        i[icon-name="account-book"]::before { content: "\f02d"; }
        i[icon-name="gold"]::before { content: "\f3a5"; }
        i[icon-name="radar-chart"]::before { content: "\f201"; }
        i[icon-name="question"]::before { content: "\f059"; }
        i[icon-name="layout-dashboard"]::before { content: "\f009"; }
        i[icon-name="download"]::before { content: "\f019"; }
        i[icon-name="box"]::before { content: "\f466"; }
        i[icon-name="settings"]::before { content: "\f013"; }
        i[icon-name="check"]::before { content: "\f00c"; }
        /* Professional and Realistic KYC Section Styling */
        .kyc-card {
            background: linear-gradient(145deg, #ffffff 0%, #f0f4f8 100%);
            border-radius: 16px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1), inset 0 2px 4px rgba(255, 255, 255, 0.5);
            padding: 2rem;
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease;
        }
        .dark-theme .kyc-card {
            background: linear-gradient(145deg, #2d3748 0%, #1a202c 100%);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3), inset 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        .kyc-card:hover {
            transform: translateY(-4px);
        }
        .kyc-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
        }
        .kyc-card-header {
            padding-bottom: 1.5rem;
            margin-bottom: 2rem;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }
        .dark-theme .kyc-card-header {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .kyc-card-header .title {
            font-size: 1.875rem;
            font-weight: 700;
            color: #1a202c;
            margin-bottom: 0.5rem;
        }
        .dark-theme .kyc-card-header .title {
            color: #e2e8f0;
        }
        .kyc-card-header .subtitle {
            font-size: 0.875rem;
            color: #6b7280;
            line-height: 1.5;
        }
        .dark-theme .kyc-card-header .subtitle {
            color: #9ca3af;
        }
        .kyc-progress {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
            font-size: 0.875rem;
            color: #4b5563;
        }
        .dark-theme .kyc-progress {
            color: #9ca3af;
        }
        .kyc-progress i {
            color: #10b981;
            margin-right: 0.5rem;
        }
        .kyc-form-label {
            font-weight: 600;
            color: #1a202c;
            display: flex;
            align-items: center;
            margin-bottom: 0.75rem;
            font-size: 0.875rem;
        }
        .dark-theme .kyc-form-label {
            color: #e2e8f0;
        }
        .kyc-form-label i {
            margin-right: 0.5rem;
            color: #3b82f6;
        }
        .kyc-dropzone {
            border: 2px dashed #d1d5db;
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            background: #f9fafb;
            transition: border-color 0.3s ease, background 0.3s ease;
            position: relative;
            cursor: pointer;
        }
        .dark-theme .kyc-dropzone {
            border-color: #6b7280;
            background: #374151;
        }
        .kyc-dropzone:hover, .kyc-dropzone.dragover {
            border-color: #3b82f6;
            background: #eff6ff;
        }
        .dark-theme .kyc-dropzone:hover, .dark-theme .kyc-dropzone.dragover {
            background: #4b5563;
        }
        .kyc-dropzone i {
            font-size: 1.5rem;
            color: #3b82f6;
            margin-bottom: 0.5rem;
        }
        .kyc-dropzone p {
            margin: 0;
            font-size: 0.875rem;
            color: #6b7280;
        }
        .dark-theme .kyc-dropzone p {
            color: #9ca3af;
        }
        .form-control {
            display: none; /* Hidden but still functional for file input */
        }
        .img-preview {
            max-width: 200px;
            border-radius: 12px;
            margin-top: 1rem;
            border: 1px solid #e5e7eb;
            padding: 4px;
            transition: opacity 0.3s ease;
            animation: fadeIn 0.5s ease-in-out;
        }
        .dark-theme .img-preview {
            border-color: #4b5563;
        }
        .kyc-btn {
            background: linear-gradient(90deg, #3b82f6 0%, #8b5cf6 100%);
            color: #ffffff;
            padding: 0.875rem 2rem;
            border-radius: 12px;
            font-weight: 600;
            transition: background 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .kyc-btn:hover {
            background: linear-gradient(90deg, #2563eb 0%, #7c3aed 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }
        .kyc-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        .kyc-btn .spinner {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 2px solid #ffffff;
            border-top: 2px solid transparent;
            border-radius: 50%;
            width: 1.5rem;
            height: 1.5rem;
            animation: spin 1s linear infinite;
        }
        .kyc-btn.loading .spinner {
            display: block;
        }
        .kyc-btn.loading span {
            visibility: hidden;
        }
        @keyframes spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
    </style>

    <title>Digitalaffiliate - KYC</title>
</head>
<body class="dark-theme">
<script>
    var notify = { timeout: "5000" };
</script>
<!--Full Layout-->
<div class="panel-layout">
    <!--Header-->
    <div class="panel-header">
        <div class="logo">
            <a href="./Digitalaffiliate - KYC_files/Digitalaffiliate_logo.png">
                <img class="logo-unfold" src="./Digitalaffiliate - KYC_files/Digitalaffiliate_logo.png" alt="Logo">
                <img class="logo-fold" src="./Digitalaffiliate - KYC_files/Digitalaffiliate_logo.png" alt="Logo">
            </a>
        </div>
        <div class="nav-wrap">
            <div class="nav-left">
                <button class="sidebar-toggle">
                    <i class="fa-solid fa-arrow-left"></i>
                </button>
                <div class="mob-logo">
                    <a href="./Digitalaffiliate - KYC_files/Digitalaffiliate_logo.png">
                        <img src="./Digitalaffiliate - KYC_files/Digitalaffiliate_logo.png" alt="Site Name">
                    </a>
                </div>
            </div>
            <div class="nav-right">
                <div class="single-nav-right">
                    <div class="single-right">
                        <div class="color-switcher">
                            <i class="fa-solid fa-moon dark-icon" data-mode="dark"></i>
                            <i class="fa-solid fa-sun light-icon" data-mode="light"></i>
                        </div>
                    </div>
                    <div class="single-nav-right user-notifications64">
                        <button type="button" class="item notification-dot" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fa-solid fa-bell"></i>
                            <div class="number"></div>
                        </button>
                        <div class="dropdown-menu dropdown-menu-end notification-pop">
                            <div class="noti-head">Notifications <span></span></div>
                            <div class="all-noti" data-id="notificationHistory">
                                <p>Notification Not Found</p>
                            </div>
                        </div>
                    </div>
                 <div class="single-right">
                        <button type="button" class="item" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fa-solid fa-user"></i>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li>
                                <a href="settings.html" class="dropdown-item" type="button">
                                    <i class="fa-solid fa-gear"></i>Settings
                                </a>
                            </li>
                            
                            
                           <li class="logout">
  <form method="POST" action="index.html" id="logout-form">
    <input type="hidden" name="_token" value="9kCuipxO2Fv0Jp7SzFlGyrKtgTFJ9QLPihfrgMeQ">
    <button id="logoutBtn" type="submit" class="dropdown-item" onclick="event.preventDefault(); localStorage.clear(); document.getElementById('logout-form').submit();">
      <i class="fa-solid fa-sign-out-alt"></i> Logout
    </button>
  </form>
</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--/Header-->

    <div class="desktop-screen-show">
        <div class="side-nav">
            <div class="side-wallet-box default-wallet mb-0">
                <div class="user-balance-card">
                    <div class="wallet-name">
                        <div class="name">Account Balance</div>
                        <div class="default">Wallet</div>
                    </div>
                    <div class="wallet-info">
                        <div class="wallet-id"><i class="fa-solid fa-wallet"></i>Main Wallet</div>
                        <div class="balance">$<span data-id="mainBalance">0.00</span></div>
                    </div>
                    <div class="wallet-info">
                        <div class="wallet-id"><i class="fa-solid fa-landmark"></i>Profit Wallet</div>
                        <div class="balance">$<span data-id="profitBalance">0.00</span></div>
                    </div>
                </div>
                <div class="actions">
                    <a href="deposit.html" class="user-sidebar-btn"><i class="fa-solid fa-file-circle-plus"></i>Deposit</a>
                    <a href="shemas.html" class="user-sidebar-btn red-btn"><i class="fa-solid fa-share"></i>Invest Now</a>
                </div>
            </div>
            <div class="side-nav-inside">
                <ul class="side-nav-menu">
                    <li class="side-nav-item active">
                        <a href="dashboard.html"><i class="fa-solid fa-th"></i><span>Dashboard</span></a>
                    </li>
                    <li class="side-nav-item">
                        <a href="shemas.html"><i class="fa-solid fa-check-square"></i><span>All Schema</span></a>
                    </li>
                    <li class="side-nav-item">
                        <a href="invest-log.html"><i class="fa-solid fa-copy"></i><span>Schema Logs</span></a>
                    </li>
                    <li class="side-nav-item">
                        <a href="transactions.html"><i class="fa-solid fa-inbox"></i><span>All Transactions</span></a>
                    </li>
                    <li class="side-nav-item">
                        <a href="deposit.html"><i class="fa-solid fa-file-circle-plus"></i><span>Add Money</span></a>
                    </li>
                
                    <li class="side-nav-item">
                        <a href="withdraw.html"><i class="fa-solid fa-university"></i><span>Withdraw</span></a>
                    </li>
                   
                 
                    <li class="side-nav-item">
                        <a href="settings.html"><i class="fa-solid fa-gear"></i><span>Settings</span></a>
                    </li>
                  
                    </li>
               
                </ul>
            </div>
        </div>
    </div>

                           
                        
    <div class="page-container">
        <div class="main-content">
            <div class="section-gap">
                <div class="container-fluid">
                    <div class="row desktop-screen-show">
                        <div class="col">
                           <h3 class="title"><i class="fa-solid fa-shield-halved"></i>KYC Verification <div class="small">Status: <span data-id="kycStatus">Not submitted</span></div>
    </div>
</h3> 
                            
                        </div>
                    </div>
                    <div class="row mobile-screen-show">
                        <div class="col-12">
                            <div class="user-kyc-mobile">
                              <h3 class="title"><i class="fa-solid fa-shield-halved"></i>KYC Verification <div class="small">Status: <span data-id="kycStatus">Not submitted</span></div>
    </div>
</h3>
                            </div>
                        </div>
                    </div>
                    <!--Page Content-->
                    <div class="row justify-content-center">
                        <div class="col-xl-8 col-lg-12 col-md-12 col-sm-12 col-12">
                          <iframe width="100%" height="523px" src="Digitalaffiliate - KYC copy.html" frameborder="0"></iframe>
                            <div class="site-card kyc-card">
                                
                                <div class="site-card-body">
                                    <div>
                                        <input type="hidden" name="_token" value="KzI8G85NO2UZaeQUp3oWJ1RlVFouAQl0fRovsg2f">
                                        <div class="col-xl-12 col-md-12 mb-4">
                                            <div class="progress-steps-form">
                                                <label for="kycTypeSelect" class="kyc-form-label"><i class="fa-solid fa-solid fa-user"></i>Verification Type <span> - </span> <span> 2</span></label>
                                               
                                            </div>
                                        </div>
                                    <form  id="kycForm">
                                                                              
                                        <div class="col-xl-12 col-md-12">
                                            <div class="row kycData" id="kycDataFields">
                    <div class="col-xl-12 col-md-12">
                        <div class="kyc-dropzone" data-input="selfie">
                            <i class="fa-solid fa-user"></i>
                            <p>DOB</p>
                           <input type="text" type="text" id="kycName" required>
                        </div>
                    </div>
                </div>
                                        </div><br>
                                        
                                       <center> <button type="submit" class="kyc-btn mt-4"><span>verify</span><div class="spinner"></div></button></center>
                                    </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--/Page Content-->
                </div>
            </div>
        </div>
    </div>
    <!-- Show in 575px in Mobile Screen -->
    <div class="mobile-screen-show">
        <div class="bottom-appbar">
            <a href="dashboard.html" class=""><i class="fa-solid fa-th"></i></a>
            <a href="deposit.html" class=""><i class="fa-solid fa-download"></i></a>
            <a href="shemas.html" class=""><i class="fa-solid fa-box"></i></a>
            <a href="settings.html" class=""><i class="fa-solid fa-gear"></i></a>
        </div>
    </div>
</div>
<script id="chatway" async="true" src="https://cdn.chatway.app/widget.js?id=GouVVYLcV6iM"></script>
<!--/Full Layout-->

<script src="./Digitalaffiliate - KYC_files/jquery.min.js.download"></script>
<script src="./Digitalaffiliate - KYC_files/jquery-migrate.js.download"></script>
<script src="./Digitalaffiliate - KYC_files/bootstrap.bundle.min.js.download"></script>
<script src="./Digitalaffiliate - KYC_files/scrollUp.min.js.download"></script>
<script src="./Digitalaffiliate - KYC_files/owl.carousel.min.js.download"></script>
<script src="./Digitalaffiliate - KYC_files/waypoints.min.js.download"></script>
<script src="./Digitalaffiliate - KYC_files/jquery.counterup.min.js.download"></script>
<script src="./Digitalaffiliate - KYC_files/jquery.nice-select.min.js.download"></script>
<script src="./Digitalaffiliate - KYC_files/magnific-popup.min.js.download"></script>
<script src="./Digitalaffiliate - KYC_files/aos.js.download"></script>
<script src="./Digitalaffiliate - KYC_files/datatables.min.js.download"></script>
<script src="./Digitalaffiliate - KYC_files/simple-notify.min.js.download"></script>
<script src="./Digitalaffiliate - KYC_files/main.js.download"></script>
<script src="./Digitalaffiliate - KYC_files/cookie.js.download"></script>
<script src="./Digitalaffiliate - KYC_files/custom.js.download"></script>
<script src="./Digitalaffiliate - KYC_files/pusher.min.js.download"></script>
<script>
    (function ($) {
        'use strict';
        let pusherAppKey = "";
        let pusherAppCluster = "mt1";
        let soundUrl = "https://topaffiliatepath.online/account/notification-tune";
        var notification = new Pusher(pusherAppKey, {
            encrypted: true,
            cluster: pusherAppCluster,
        });
        var channel = notification.subscribe('user-notification64');
        channel.bind('notification-event', function (result) {
            playSound();
            latestNotification();
            notifyToast(result);
        });
        function latestNotification() {
            $.get('https://topaffiliatepath.online/account/user/latest-notification', function (data) {
                $('.user-notifications64').html(data);
            });
        }
        function notifyToast(data) {
            new Notify({
                status: 'info',
                title: data.data.title,
                text: data.data.notice,
                effect: 'slide',
                speed: 300,
                customClass: '',
                customIcon: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-megaphone"><path d="m3 11 18-5v12L3 14v-3z"></path><path d="M11.6 16.8a3 3 0 1 1-5.8-1.6"></path></svg>',
                showIcon: true,
                showCloseButton: true,
                autoclose: true,
                autotimeout: 9000,
                gap: 20,
                distance: 20,
                type: 1,
                position: 'right bottom',
                customWrapper: '<div><a href="' + data.data.action_url + '" class="learn-more-link">Explore<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" x2="21" y1="14" y2="3"></line></svg></a></div>',
            });
        }
        function playSound() {
            $.get(soundUrl, function (data) {
                var audio = new Audio(data);
                audio.play();
                audio.muted = false;
            });
        }
    })(jQuery);
</script>
<script>
    (function ($) {
        'use strict';
        $.scrollUp({
            scrollText: '<i class="fa-solid fa-caret-up"></i>',
            easingType: 'linear',
            scrollSpeed: 500,
            animation: 'fade'
        });
    })(jQuery);
</script><a id="scrollUp" href="http://127.0.0.1:5500/kyc.html#top" style="display: none; position: fixed; z-index: 2147483647;"><i class="fa-solid fa-caret-up"></i></a>
<script type="text/javascript" src="./Digitalaffiliate - KYC_files/notify.js.download"></script>
<script>
    $(".color-switcher").on('click', function () {
        "use strict";
        $("body").toggleClass("dark-theme");
        var url = 'https://topaffiliatepath.online/account/theme-mode';
        $.get(url);
    });
</script>
<script>
    (function ($) {
        'use strict';

        // Handle verification type selection
        $('#kycTypeSelect').on('change', function () {
            const kycType = $(this).val();
            const kycDataFields = $('#kycDataFields');
            kycDataFields.empty(); // Clear previous fields

            if (kycType === '1') { // National ID Verification
                kycDataFields.append(`
                    <div class="col-md-6">
                        <div class="kyc-dropzone" data-input="selfie">
                            <i class="fa-solid fa-camera"></i>
                            <p>Drag & drop your selfie or click to upload (JPG/PNG, max 5MB)</p>
                            <input type="file" name="selfie" id="selfie" class="form-control" accept="image/*" required>
                            <img id="selfiePreview" class="img-preview" style="display:none;">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="kyc-dropzone" data-input="government_id">
                            <i class="fa-solid fa-id-card"></i>
                            <p>Drag & drop your government ID or click to upload (JPG/PNG, max 5MB)</p>
                            <input type="file" name="government_id" id="government_id" class="form-control" accept="image/*" required>
                            <img id="idPreview" class="img-preview" style="display:none;">
                        </div>
                    </div>
                `);

                // Add drag-and-drop functionality
                $('.kyc-dropzone').each(function () {
                    const dropzone = $(this);
                    const inputId = dropzone.data('input');
                    const input = $(`#${inputId}`);

                    dropzone.on('click', function () {
                        input.click();
                    });

                    dropzone.on('dragover', function (e) {
                        e.preventDefault();
                        dropzone.addClass('dragover');
                    });

                    dropzone.on('dragleave', function () {
                        dropzone.removeClass('dragover');
                    });

                    dropzone.on('drop', function (e) {
                        e.preventDefault();
                        dropzone.removeClass('dragover');
                        const files = e.originalEvent.dataTransfer.files;
                        if (files.length) {
                            input[0].files = files;
                            input.trigger('change');
                        }
                    });
                });
            }
        });

        // Preview uploaded images
        function previewImage(input, previewId) {
            const file = input.files[0];
            const preview = $(previewId);
            const dropzone = preview.siblings('.kyc-dropzone');
            if (file) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    preview.attr('src', e.target.result).show();
                    dropzone.hide();
                };
                reader.readAsDataURL(file);
            } else {
                preview.hide();
                dropzone.show();
            }
        }

        // Attach preview handlers
        $(document).on('change', '#selfie', function () {
            previewImage(this, '#selfiePreview');
        });
        $(document).on('change', '#government_id', function () {
            previewImage(this, '#idPreview');
        });

        // Form validation and AJAX submission
        $('#kycForm').on('submit', function (e) {
            e.preventDefault();
            const selfie = $('#selfie')[0].files[0];
            const governmentId = $('#government_id')[0].files[0];
            const maxSize = 5 * 1024 * 1024; // 5MB
            const submitBtn = $('.kyc-btn');

            // Validate file types and sizes
            if (!selfie || !governmentId) {
                new Notify({
                    status: 'error',
                    title: 'Missing Files',
                    text: 'Please upload both a selfie and government ID.',
                    effect: 'slide',
                    speed: 300,
                    autoclose: true,
                    autotimeout: 5000,
                    position: 'right bottom'
                });
                return;
            }

            if (selfie.size > maxSize || governmentId.size > maxSize) {
                new Notify({
                    status: 'error',
                    title: 'File Too Large',
                    text: 'Files must be less than 5MB.',
                    effect: 'slide',
                    speed: 300,
                    autoclose: true,
                    autotimeout: 5000,
                    position: 'right bottom'
                });
                return;
            }

            if (!['image/jpeg', 'image/png'].includes(selfie.type) || !['image/jpeg', 'image/png'].includes(governmentId.type)) {
                new Notify({
                    status: 'error',
                    title: 'Invalid File Type',
                    text: 'Only JPG or PNG files are allowed.',
                    effect: 'slide',
                    speed: 300,
                    autoclose: true,
                    autotimeout: 5000,
                    position: 'right bottom'
                });
                return;
            }

            // Show loading state
            submitBtn.addClass('loading').prop('disabled', true);

            // Submit the form via AJAX
            const formData = new FormData(this);
            $.ajax({
                url: $(this).attr('action'),
                type: 'POST',
                data: formData,
                processData: false,
                contentType: false,
                success: function (response) {
                    new Notify({
                        status: 'success',
                        title: 'KYC Submitted',
                        text: 'Your KYC details have been submitted for review.',
                        effect: 'slide',
                        speed: 300,
                        autoclose: true,
                        autotimeout: 5000,
                        position: 'right bottom'
                    });
                    $('#kycForm')[0].reset();
                    $('#kycDataFields').empty();
                    $('#selfiePreview, #idPreview').hide();
                    $('.kyc-dropzone').show();
                    submitBtn.removeClass('loading').prop('disabled', false);
                },
                error: function (xhr) {
                    new Notify({
                        status: 'error',
                        title: 'Submission Failed',
                        text: xhr.responseJSON?.message || 'An error occurred while submitting your KYC details.',
                        effect: 'slide',
                        speed: 300,
                        autoclose: true,
                        autotimeout: 5000,
                        position: 'right bottom'
                    });
                    submitBtn.removeClass('loading').prop('disabled', false);
                }
            });
        });
    })(jQuery);
</script>
<!-- Code injected by live-server -->
<script>
	// <![CDATA[  <-- For SVG support
	if ('WebSocket' in window) {
		(function () {
			function refreshCSS() {
				var sheets = [].slice.call(document.getElementsByTagName("link"));
				var head = document.getElementsByTagName("head")[0];
				for (var i = 0; i < sheets.length; ++i) {
					var elem = sheets[i];
					var parent = elem.parentElement || head;
					parent.removeChild(elem);
					var rel = elem.rel;
					if (elem.href && typeof rel != "string" || rel.length == 0 || rel.toLowerCase() == "stylesheet") {
						var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, '');
						elem.href = url + (url.indexOf('?') >= 0 ? '&' : '?') + '_cacheOverride=' + (new Date().valueOf());
					}
					parent.appendChild(elem);
				}
			}
			var protocol = window.location.protocol === 'http:' ? 'ws://' : 'wss://';
			var address = protocol + window.location.host + window.location.pathname + '/ws';
			var socket = new WebSocket(address);
			socket.onmessage = function (msg) {
				if (msg.data == 'reload') window.location.reload();
				else if (msg.data == 'refreshcss') refreshCSS();
			};
			if (sessionStorage && !sessionStorage.getItem('IsThisFirstTime_Log_From_LiveServer')) {
				console.log('Live reload enabled.');
				sessionStorage.setItem('IsThisFirstTime_Log_From_LiveServer', true);
			}
		})();
	}
	else {
		console.error('Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading.');
	}
	// ]]>
</script>

	  <!-- Dashboard logic -->
  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js';
    import { getAuth, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.12.5/firebase-auth.js';
    import { getDatabase, ref, get, push, set, update, onValue, serverTimestamp } from 'https://www.gstatic.com/firebasejs/10.12.5/firebase-database.js';

    const firebaseConfig = {
      apiKey: "AIzaSyDkfxpBDGypau8uh6Qq95acUl57nxlppaM",
  authDomain: "digital-affiliate-c04af.firebaseapp.com",
  databaseURL: "https://digital-affiliate-c04af-default-rtdb.firebaseio.com",
  projectId: "digital-affiliate-c04af",
  storageBucket: "digital-affiliate-c04af.firebasestorage.app",
  messagingSenderId: "242061474584",
  appId: "1:242061474584:web:8fa4829a52e043473e7c6d"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getDatabase(app);

    document.addEventListener('DOMContentLoaded', () => {
      const debugEl = document.getElementById('dashboardDebug');
      function dbg(msg){ if(debugEl) debugEl.textContent=msg; console.log(msg); }
      function updateUI(key, value){
        document.querySelectorAll(`[data-id="${key}"]`).forEach(el=>{
          el.textContent = (value==null? '' : value);
        });
      }

      onAuthStateChanged(auth, async user => {
        if(!user){ window.location.href='login.html'; return; }
        const userRef = ref(db, `users/${user.uid}`);

        onValue(userRef, snap => {
          const data = snap.val() || {};
          const profile = data.profile || data;
          updateUI('userName', profile.name||'');
          updateUI('userEmail', profile.email||user.email||'');
          updateUI('userPhone', profile.phone||'');
          updateUI('userGender', profile.gender||'');
          updateUI('userCountry', profile.country||'');
          updateUI('userDOB', profile.dob||'');
          updateUI('userAddress', profile.address||'');
          updateUI('userCreated', profile.createdAt? new Date(profile.createdAt).toLocaleString() : '');

          updateUI('mainBalance', Number(data.wallets?.mainWallet||0).toFixed(2));
          updateUI('profitBalance', Number(data.wallets?.profitWallet||0).toFixed(2));

          updateUI('totalTransactions', data.totalTransactions||0);
          updateUI('totalDeposit', Number(data.totalDeposit||0).toFixed(2));
          updateUI('totalInvestment', Number(data.totalInvestment||0).toFixed(2));
          updateUI('totalProfit', Number(data.totalProfit||0).toFixed(2));
          updateUI('userRank', data.rank||'Newbie');

          // show KYC status
          updateUI('kycStatus', data.kycStatus||'not_submitted');

          // notify if KYC approved
          if(data.kycStatus === 'approved' && !data.kycApprovedNotified){
            const nRef = push(ref(db, `users/${user.uid}/notifications`));
            set(nRef, { id:nRef.key, title:'KYC Approved', body:'Your KYC has been approved.', createdAt: Date.now() });
            update(ref(db), { [`users/${user.uid}/kycApprovedNotified`]: true });
          }

          // render notifications
          const notDiv = document.querySelector('[data-id="notificationHistory"]');
          if(notDiv){
            const notes = data.notifications? Object.values(data.notifications):[];
            if(notes.length){
              notDiv.innerHTML = notes.sort((a,b)=> (b.createdAt||0)-(a.createdAt||0)).map(n=>{
                const date=n.createdAt? new Date(n.createdAt).toLocaleString():'';
                return `<div style="padding:6px;border-bottom:1px solid #eee"><strong>${n.title||''}</strong><div class="small">${n.body||''}</div><div class="small">${date}</div></div>`;
              }).join('');
            } else { notDiv.innerHTML='<div class="small">No notifications</div>'; }
          }
        });

        // KYC submit
        document.getElementById('kycForm')?.addEventListener('submit', async e=>{
          e.preventDefault();
          const kycName=document.getElementById('kycName').value.trim();
          if(!kycName) return alert('Enter your full name');
          await update(ref(db), {
            [`users/${user.uid}/kycName`]: kycName,
            [`users/${user.uid}/kycStatus`]: 'pending'
          });
          alert('KYC submitted. Waiting for Aproval.');
        });

        // Withdraw handler with KYC check
        document.getElementById('withdrawForm')?.addEventListener('submit', async e=>{
          e.preventDefault();
          const snap=await get(userRef);
          const userData=snap.val()||{};
          if(userData.kycStatus!=='approved'){
            alert('Please do your KYC first.');
            return;
          }
          // continue withdraw logic...
          const amt=Number(document.getElementById('withdrawAmount').value||0);
          if(amt<=0) return alert('Enter valid amount');
          const profitBal=Number(userData.wallets?.profitWallet||0);
          if(profitBal<amt) return alert('Insufficient profit balance');
          const wRef=push(ref(db, `users/${user.uid}/withdrawals`));
          await set(wRef,{id:wRef.key, amount:amt, createdAt:Date.now(), status:'pending'});
          await update(ref(db), {
            [`users/${user.uid}/wallets/profitWallet`]: profitBal-amt,
            [`users/${user.uid}/totalTransactions`]: (userData.totalTransactions||0)+1
          });
          alert('Withdrawal requested (pending admin approval)');
        });
      });
    });
  </script>
</script>
  <script type="module">
    import { getAuth, signOut } from 'https://www.gstatic.com/firebasejs/10.12.5/firebase-auth.js';

const auth = getAuth();

document.addEventListener('DOMContentLoaded', () => {
  const logoutBtn = document.getElementById('logoutBtn');
  if (logoutBtn) {
    logoutBtn.addEventListener('click', async () => {
      try {
        await signOut(auth);
        alert('You have been logged out.');
        window.location.href = 'login.html'; // redirect to login page
      } catch (err) {
        console.error('Logout failed:', err);
        alert('Error logging out: ' + err.message);
      }
    });
  }
});
  </script>
 
</body></html>
